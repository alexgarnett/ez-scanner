{% extends 'base.html' %}

{% block content %}
    <label for="image">Press "Choose File" to take a picture</label>
        <input type="file" onchange="sendURL(this);" id="image" name="image" accept="image/*" capture="environment">
    <br>
    <button id="submit">Submit Photo</button>
    <script>
        function sendURL(input) {
            var file = document.querySelector('input[type=file]').files[0];
            var reader = new FileReader();

            reader.onloadend = function () {
                $.post("{{ url_for('post_image') }}",
                {
                    data: reader.result;
                },
                function() {
                    // Redirect to review_image page
                    window.location.href = "{{ url_for('review_image') }}";
                });
            }

            if (file) {
                reader.readAsDataURL(file);
            }
        }
    </script>
{% endblock %}